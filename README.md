
# ü´Ä IoT-—Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≠–ö–ì —Å –ò–ò-–∞–Ω–∞–ª–∏–∑–æ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ–µ edge-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞ –±–∞–∑–µ Raspberry Pi 5 –¥–ª—è –∑–∞–ø–∏—Å–∏, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —ç–ª–µ–∫—Ç—Ä–æ–∫–∞—Ä–¥–∏–æ–≥—Ä–∞–º–º—ã.  
–†–µ—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç **–ª–æ–∫–∞–ª—å–Ω–æ**, –±–µ–∑ –æ–±–ª–∞–∫–∞, –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ reverse proxy ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–ª–µ–º–µ–¥–∏—Ü–∏–Ω—ã, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏ –¥–æ–º–∞—à–Ω–µ–≥–æ —Å–∫—Ä–∏–Ω–∏–Ω–≥–∞.

![–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](docs/architecture.png)  
*(–ü—Ä–∏–º–µ—Ä: Arduino ‚Üí Raspberry Pi ‚Üí FastAPI ‚Üí frp ‚Üí VPS)*

---

## üåü –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ó–∞–ø–∏—Å—å –≠–ö–ì –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –¥–∞—Ç—á–∏–∫–∞ **AD8232** —á–µ—Ä–µ–∑ **Arduino Nano**
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ 6 –æ—Ç–≤–µ–¥–µ–Ω–∏–π (I, II, III, aVR, aVL, aVF) –ø–æ —Ñ–æ—Ä–º—É–ª–∞–º –≠–π–Ω—Ç—Ö–æ–≤–µ–Ω–∞
- –ü–æ–ª–æ—Å–æ–≤–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (0.5‚Äì40 –ì—Ü) –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è **19 –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ç–æ–ª–æ–≥–∏–π** (–∞—Ä–∏—Ç–º–∏–∏, –±–ª–æ–∫–∞–¥—ã, —Å–∏–Ω–¥—Ä–æ–º—ã)
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å live-–≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–æ–π –∞–Ω–∞–ª–∏–∑–∞
- –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ **frp** (–±–µ–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ IP)
- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å frp –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ **Candy** (–≤–µ–±-—á–∞—Ç)

---

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
AD8232 + Arduino Nano 
        ‚Üì (Serial Monitor ‚Üí pyserial)
Raspberry Pi 5 (Edge)
  ‚îú‚îÄ –ü—Ä–∏—ë–º –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–∞
  ‚îú‚îÄ –õ–æ–∫–∞–ª—å–Ω—ã–π –ò–ò-–∞–Ω–∞–ª–∏–∑ (TorchScript)
  ‚îî‚îÄ FastAPI + WebSocket ‚Üí –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        ‚Üì (frp reverse tunnel)
VPS (159.255.36.113)
  ‚îú‚îÄ frps: –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ + –∞–¥–º–∏–Ω–∫–∞ (–ø–æ—Ä—Ç 7500)
  ‚îî‚îÄ Candy: –≤–µ–±-—á–∞—Ç –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏
```

> üí° –ú–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞ –≤ **Podman-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ** –Ω–∞ **Fedora Silverblue** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–∞—Ç–∞—Å–µ—Ç–∞ **PTB-XL**.

---

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Raspberry Pi 5 (4 –ì–ë RAM –∏–ª–∏ –±–æ–ª—å—à–µ)
- AD8232 ECG Sensor
- Arduino Nano
- –≠–ª–µ–∫—Ç—Ä–æ–¥—ã (–º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∏–ª–∏ —Å–∞–º–æ–¥–µ–ª—å–Ω—ã–µ)
- VPS —Å –ø—É–±–ª–∏—á–Ω—ã–º IP (–¥–ª—è frp)

### –ù–∞ Raspberry Pi
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   sudo apt update && sudo apt install python3 python3-pip
   pip3 install fastapi uvicorn pyserial torch numpy scipy
   ```
2. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/–≤–∞—à-–ª–æ–≥–∏–Ω/ecg-iot.git
   cd ecg-iot
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
   ```bash
   python3 app.py
   ```

### –ù–∞ VPS (–¥–ª—è frp)
1. –°–∫–∞—á–∞–π—Ç–µ [frp](https://github.com/fatedier/frp) –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `frps`:
   ```bash
   ./frps -c frps.toml
   ```
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `frpc` –Ω–∞ Raspberry Pi –¥–ª—è –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–æ—Ä—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 8000 ‚Üí 8001).

–¢–µ–ø–µ—Ä—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ:  
üëâ **http://159.255.36.113:8001**  
–ê–¥–º–∏–Ω–∫–∞ frp: **http://159.255.36.113:7500**

---

## üñ•Ô∏è –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

- Live-–≥—Ä–∞—Ñ–∏–∫–∏ 6 –æ—Ç–≤–µ–¥–µ–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ 10-—Å–µ–∫—É–Ω–¥–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- –ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞–ø–∏—Å–∏ –∫–Ω–æ–ø–∫–æ–π **¬´–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑¬ª**
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–≤–æ–∏—Ö `.npy`-—Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –≠—Ç–æ **–ø—Ä–æ—Ç–æ—Ç–∏–ø –¥–ª—è —Å–∫—Ä–∏–Ω–∏–Ω–≥–∞**, –∞ –Ω–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –ø—Ä–∏–±–æ—Ä.  
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ò–ò **–Ω–µ –∑–∞–º–µ–Ω—è—é—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –≤—Ä–∞—á–∞**.  
- –ö–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–∞ —Å–∏–ª—å–Ω–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω—Ç–∞–∫—Ç–∞ —ç–ª–µ–∫—Ç—Ä–æ–¥–æ–≤.

---

## üìö –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è —á–∞—Å—Ç—å
- **AD8232** ‚Äî –º–æ–¥—É–ª—å —ç–ª–µ–∫—Ç—Ä–æ–∫–∞—Ä–¥–∏–æ–≥—Ä–∞—Ñ–∞ –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –±–∏–æ–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–≤
- **Arduino Nano** (2√ó) ‚Äî –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å –¥–∞—Ç—á–∏–∫–æ–≤ –ø–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º—É –ø–æ—Ä—Ç—É
- **Raspberry Pi 5** ‚Äî edge-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ –∑–∞–ø—É—Å–∫–∞ –ò–ò-–º–æ–¥–µ–ª–∏

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π —Å—Ç–µ–∫

**Backend & –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤:**
- **Python 3** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **FastAPI** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è REST API
- **WebSocket** ‚Äî –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –¥–ª—è live-—Å—Ç—Ä–∏–º–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö
- **pyserial** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ—Ä—Ç–∞–º–∏ Arduino
- **NumPy** ‚Äî —á–∏—Å–ª–µ–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∏ —Ä–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–∞–º–∏
- **SciPy** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ (—Ñ–∏–ª—å—Ç—Ä—ã –ë–∞—Ç—Ç–µ—Ä–≤–æ—Ä—Ç–∞, —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ)

**–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ:**
- **PyTorch** ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
- **TorchScript** ‚Äî –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ –¥–ª—è edge-–∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ –Ω–∞ CPU
- **PTB-XL Dataset** ‚Äî –ø—É–±–ª–∏—á–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç –∏–∑ ~21,800 –≠–ö–ì –∑–∞–ø–∏—Å–µ–π –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
- **Kaggle Hub** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞ —á–µ—Ä–µ–∑ API

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏:**
- –°–≤–µ—Ä—Ç–æ—á–Ω–∞—è –Ω–µ–π—Ä–æ–Ω–Ω–∞—è —Å–µ—Ç—å (CNN) —Å 1D-—Å–ª–æ—è–º–∏
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: Conv1D ‚Üí BatchNorm ‚Üí ReLU ‚Üí MaxPool ‚Üí AdaptiveAvgPool ‚Üí Dense
- –ú—É–ª—å—Ç–∏–ª–µ–π–±–ª-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (19 –∫–ª–∞—Å—Å–æ–≤ –ø–∞—Ç–æ–ª–æ–≥–∏–π)
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –∫–ª–∞—Å—Å–æ–≤ —á–µ—Ä–µ–∑ `BCEWithLogitsLoss` —Å `pos_weight`

**–§—Ä–æ–Ω—Ç–µ–Ω–¥:**
- **HTML5/CSS3** ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **Chart.js** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≠–ö–ì-—Å–∏–≥–Ω–∞–ª–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **Jinja2** ‚Äî —à–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- **frp (Fast Reverse Proxy)** ‚Äî —Ç—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ IP
- **Candy** ‚Äî –≤–µ–±-—á–∞—Ç –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **VPS** ‚Äî –ø—É–±–ª–∏—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–æ—Ä—Ç–æ–≤

**–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ DevOps:**
- **Podman** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏—è
- **Fedora Silverblue** ‚Äî immutable-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- **Matplotlib** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –æ—Ç–ª–∞–¥–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
- **PIL/Pillow** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö GIF –∏–∑ –≠–ö–ì-–∑–∞–ø–∏—Å–µ–π

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **Edge Computing** ‚Äî –≤–µ—Å—å –ò–ò-–∏–Ω—Ñ–µ—Ä–µ–Ω—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ Raspberry Pi –±–µ–∑ –æ–±–ª–∞–∫–∞
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤** ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ 6 –æ—Ç–≤–µ–¥–µ–Ω–∏–π –ø–æ —Ñ–æ—Ä–º—É–ª–∞–º –≠–π–Ω—Ç—Ö–æ–≤–µ–Ω–∞ –∏–∑ 2 —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –∫–∞–Ω–∞–ª–æ–≤
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** ‚Äî –ø–æ–ª–æ—Å–æ–≤–æ–π —Ñ–∏–ª—å—Ç—Ä 0.5‚Äì40 –ì—Ü, —Ñ–∏–ª—å—Ç—Ä –ë–∞—Ç—Ç–µ—Ä–≤–æ—Ä—Ç–∞, —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ Gaussian
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** ‚Äî –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è —á—Ç–µ–Ω–∏—è Serial + async FastAPI –¥–ª—è WebSocket
- **–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ 10-—Å–µ–∫—É–Ω–¥–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥  

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî —Å–º. —Ñ–∞–π–ª [`LICENSE`](LICENSE).

---

> üíì –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî —Å–¥–µ–ª–∞—Ç—å –∫–∞—Ä–¥–∏–æ–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–∞–∫–∏–º –∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã–º, –∫–∞–∫ –∏–∑–º–µ—Ä–µ–Ω–∏–µ –ø—É–ª—å—Å–∞.